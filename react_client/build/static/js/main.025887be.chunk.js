(this["webpackJsonpreact-flask-app"]=this["webpackJsonpreact-flask-app"]||[]).push([[0],{189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(1),s=n.n(i),r=n(8),o=n(31),l=Object(o.b)({tangle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}}),c=n(48),d=n(14),h=n(16),u=n(93),j=n(94),p=n(45),f=n(101),m=n(100),v=n(95),b=n(102),g=n(26),x=n(37),O=function(e){var t=e.x,n=e.endX,i=e.y,s=e.startVal,r=e.endVal,o=e.ticks,l=x.a().domain([s,r]);l.range([t,n]);var c=l.ticks(o);return Object(a.jsxs)("g",{fill:"none",className:"unselectable axis",children:[Object(a.jsx)("text",{x:(t+n)/2,y:i-5,children:"Time"}),Object(a.jsx)("line",{stroke:"#000",strokeWidth:"1",x1:t,x2:n,y1:i,y2:i}),c.map((function(e){return Object(a.jsx)("line",{stroke:"#000",strokeWidth:"2",x1:l(e),y1:i,x2:l(e),y2:i+5},e)})),c.map((function(e){return Object(a.jsx)("text",{fontSize:"12",x:l(e),y:i+16,children:e},e)})),"}"]})},k=function(e){var t=e.color,n=e.id;e.nodeRadius;return Object(a.jsx)("marker",{id:n,viewBox:"0 -5 10 10",refX:0,refY:0,markerWidth:10,markerHeight:6,fill:t,markerUnits:"userSpaceOnUse",orient:"auto",children:Object(a.jsx)("path",{d:"M0,-5L10,0L0,5"})})},y=function(e){var t=e.nodeRadius,n=e.mouseEntersNodeHandler,i=e.mouseLeavesNodeHandler,s=e.name;return Object(a.jsx)("rect",{width:t,height:t,x:-t/2,y:-t/2,rx:t/5,ry:t/5,stroke:"black",strokeWidth:"1px",fill:"white",name:s,onMouseEnter:n,onMouseLeave:i})},w=function(e){var t=e.link,n=e.nodeRadius,a={x:t.target.x-t.source.x,y:t.target.y-t.source.y},i=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2)),s=(i-n)/i,r=t.source.x+s*a.x,o=t.source.y+s*a.y;return"M ".concat(t.source.x," ").concat(t.source.y," ")+"L ".concat(r," ").concat(o)},N=function(e){return Object(a.jsx)("div",{children:Object(a.jsxs)("svg",{width:e.width,height:e.height,children:[Object(a.jsxs)("defs",{children:[Object(a.jsx)(k,{color:"black",id:"arrowhead",nodeRadius:e.nodeRadius}),Object(a.jsx)(k,{color:"red",id:"arrowhead-approved",nodeRadius:e.nodeRadius}),Object(a.jsx)(k,{color:"blue",id:"arrowhead-approving",nodeRadius:e.nodeRadius})]}),Object(a.jsx)("g",{children:e.links.map((function(t){return Object(a.jsx)("path",{className:"links".concat(e.approvedLinks.has(t)?" approved":e.approvingLinks.has(t)?" approving":""),d:w({link:t,nodeRadius:e.nodeRadius}),markerEnd:e.approvedLinks.has(t)?"url(#arrowhead-approved)":e.approvingLinks.has(t)?"url(#arrowhead-approving)":"url(#arrowhead)"},"".concat(t.source.name,"->").concat(t.target.name))}))}),Object(a.jsx)("g",{children:e.nodes.map((function(t){return Object(a.jsxs)("g",{transform:"translate(".concat(t.x,",").concat(t.y,")"),className:"".concat(e.approvedNodes.has(t)?"approved":e.approvingNodes.has(t)?"approving":e.tips.has(t)?"tip":""),children:[e.hoveredNode===t&&Object(a.jsxs)("g",{style:{opacity:.4},children:[Object(a.jsx)(y,{nodeRadius:1.6*e.nodeRadius}),Object(a.jsx)(y,{nodeRadius:1.3*e.nodeRadius})]}),Object(a.jsx)(y,{nodeRadius:e.nodeRadius,name:t.name,mouseEntersNodeHandler:e.mouseEntersNodeHandler,mouseLeavesNodeHandler:e.mouseLeavesNodeHandler}),e.showLabels&&Object(a.jsx)("text",{className:"unselectable",fill:"#666",fontFamily:"Helvetica",alignmentBaseline:"middle",textAnchor:"middle",pointerEvents:"none",children:t.name})]},t.name)}))}),Object(a.jsx)("g",{children:Object(a.jsx)(O,{x:e.leftMargin,endX:e.width-e.rightMargin,y:e.height-30,ticks:8,startVal:0,endVal:e.nodes.length<2?1:Math.max.apply(Math,Object(g.a)(e.nodes.map((function(e){return e.time}))))})})]})})},R=n(33),S=n(115).jStat,W=n(49),M=n(47),A=(n(169),n(170),n(99)),C=n.n(A),L=function(e){var t=e.links,n=e.node;return!t.some((function(e){return n===e.target}))},T=function(e){return e[Math.floor(Math.random()*e.length)]},H=function(e){var t=e.nodes,n=e.links,a=t.filter((function(e){return!n.some((function(t){return t.target===e}))}));return new Set(a)},E=function(e){var t=e.links,n=e.node;return t.filter((function(e){return e.target===n})).map((function(e){return e.source}))},U=function(e){for(var t=e.links,n=e.start;!L({links:t,node:n});){var a=E({links:t,node:n});n=T(a)}return n},V=function(e,t){for(var n=t.reduce((function(e,t){return e+t}),0),a=Math.random()*n,i=t[0],s=1;s<e.length;s++){if(a<i)return e[s-1];i+=t[s]}return e[e.length-1]},D=function(e){e.nodes;for(var t=e.links,n=e.start,a=e.alpha,i=n,s=function(){var e=E({links:t,node:i}),n=e.map((function(e){return e.cumWeight})),s=Math.max.apply(Math,Object(g.a)(n)),r=n.map((function(e){return e-s})).map((function(e){return Math.exp(a*e)}));i=V(e,r)};!L({links:t,node:i});)s();return i},z=function(e){e.nodes;var t=e.links,n=e.start,a=0;C.a.get("http://localhost:5000/alpha").then((function(e){a=e.data.alpha,console.log(a)}));for(var i=function(){var e=E({links:t,node:n}),i=e.map((function(e){return e.cumWeight})),s=Math.max.apply(Math,Object(g.a)(i)),r=i.map((function(e){return e-s})).map((function(e){return Math.exp(a*e)}));n=V(e,r)};!L({links:t,node:n});)i();return n},_=function(e){var t,n=e.nodes,a=e.links,i=n.reduce((function(e,t){return Object.assign(e,Object(d.a)({},t.name,[]))}),{}),s=Object(h.a)(a);try{for(s.s();!(t=s.n()).done;){var r=t.value;i[r.source.name].push(r.target)}}catch(o){s.e(o)}finally{s.f()}return i},F=function(e){var t,n=e.nodes,a=e.links,i=function(e){for(var t=e.nodes,n=e.links,a=_({nodes:t,links:n}),i=new Set(t),s=[],r=function e(t){if(i.has(t)){var n,r=Object(h.a)(a[t.name]);try{for(r.s();!(n=r.n()).done;)e(n.value)}catch(o){r.e(o)}finally{r.f()}i.delete(t),s.push(t)}};i.size>0;)r(i.values().next().value);return s.reverse(),s}({nodes:n,links:a}),s=n.reduce((function(e,t){return Object.assign(e,Object(d.a)({},t.name,new Set))}),{}),r=_({nodes:n,links:a}),o=Object(h.a)(i);try{for(o.s();!(t=o.n()).done;){var l,c=t.value,u=Object(h.a)(r[c.name]);try{for(u.s();!(l=u.n()).done;){var j=l.value;s[j.name]=new Set([].concat(Object(g.a)(s[j.name]),Object(g.a)(s[c.name]),[c]))}}catch(p){u.e(p)}finally{u.f()}c.cumWeight=s[c.name].size+1}}catch(p){o.e(p)}finally{o.f()}},K=(n(189),n(190),function(e){return Object(a.jsxs)("div",{style:{display:"table",width:"100%"},children:[Object(a.jsx)("div",{className:"left-slider-value",children:e.min}),Object(a.jsx)("div",{style:{display:"table-cell",position:"relative",top:"5px"},onWheel:function(t){t.preventDefault();var n=t.deltaY>0?e.step:-e.step,a=e.value+n;a<e.max&&a>e.min&&e.onChange(a)},children:Object(a.jsx)(W.a,{min:e.min,max:e.max,defaultValue:e.defaultValue,value:e.value,step:e.step,marks:{},handle:e.handle,disabled:e.disabled,onChange:e.onChange,trackStyle:{visibility:"hidden"},railStyle:{borderRadius:0,height:"1.2px",backgroundColor:"black"},handleStyle:{borderWidth:0,backgroundColor:"black",width:"10px",height:"10px",marginTop:"-4.5px"}})}),Object(a.jsx)("div",{className:"right-slider-value",children:e.max})]})}),I=function(e){if(e<20)return 25;if(e>100)return 13;var t=Object(x.a)().domain([20,100]);return t.range([25,13]),t(e)},B={UR:{algo:function(e){var t=e.nodes,n=e.links,a=t.filter((function(e){return L({links:n,node:e})}));return 0===a.length?[]:[T(a),T(a)]},label:"Uniform Random"},UWRW:{algo:function(e){var t=e.nodes,n=e.links;if(0===t.length)return[];var a=t[0];return[U({links:n,start:a}),U({links:n,start:a})]},label:"Unweighted Random Walk"},WRW:{algo:function(e){var t=e.nodes,n=e.links,a=e.alpha;if(0===t.length)return[];var i=t[0];return F({nodes:t,links:n}),[D({links:n,start:i,alpha:a}),D({links:n,start:i,alpha:a})]},label:"Weighted Random Walk"},AML:{algo:function(e){var t=e.nodes,n=e.links;if(0===t.length)return[];var a=t[0];return F({nodes:t,links:n}),[z({links:n,start:a}),z({links:n,start:a})]},label:"Adaptive Machine Learning"}},P=W.a.Handle,X=function(e){var t=e.value,n=e.dragging,i=e.index,s=Object(b.a)(e,["value","dragging","index"]);return Object(a.jsx)(M.a,{prefixCls:"rc-slider-tooltip",overlay:t,visible:n,placement:"top",children:Object(a.jsx)(P,Object(v.a)({value:t},s))},i)},J=function(e){var t=e.selectedAlgorithm,n=e.onChange,i=e.algoKey;return Object(a.jsxs)("label",{className:"container",children:[Object(a.jsx)("div",{style:{fontSize:10},children:B[i].label}),Object(a.jsx)("input",{type:"radio",name:"radio",value:i,checked:t===i,onChange:n}),Object(a.jsx)("span",{className:"checkmark"})]},i)},Y=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this)).state={nodes:[],links:[],nodeCount:20,lambda:1.5,alpha:.5,width:300,height:300,nodeRadius:I(20),tipSelectionAlgorithm:"UR"},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(p.a)(a)),a.force=R.c(),a.force.alphaDecay(.1),a.force.on("tick",(function(){a.force.nodes(a.state.nodes);var e,t=Object(h.a)(a.state.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.y=Math.max(a.state.nodeRadius,Math.min(a.state.height-3*a.state.nodeRadius,n.y))}}catch(i){t.e(i)}finally{t.f()}a.setState({links:a.state.links,nodes:a.state.nodes})})),a}return Object(j.a)(n,[{key:"componentWillUnmount",value:function(){this.force.stop(),window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"componentDidMount",value:function(){this.startNewTangle(),this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){var e=this;this.setState({width:window.innerWidth-10-10,height:window.innerWidth<768?window.innerHeight:window.innerHeight-190},(function(){e.recalculateFixedPositions(),e.force.force("no_collision",R.a().radius(2*e.state.nodeRadius).strength(.01).iterations(15)).force("pin_y_to_center",R.e().y((function(t){return e.state.height/2})).strength(.1)).force("pin_x_to_time",R.d().x((function(t){return e.xFromTime(t.time)})).strength(1)).force("link",R.b().links(e.state.links).strength(.5).distance(3*e.state.nodeRadius)),e.force.restart().alpha(1)}))}},{key:"startNewTangle",value:function(){var e,t=this,n=I(this.state.nodeCount),a=function(e){var t=e.nodeCount,n=e.lambda,a=void 0===n?1.5:n,i=e.h,s=void 0===i?1:i,r=e.alpha,o=void 0===r?.5:r,l=e.tipSelectionAlgorithm;S.exponential.sample(a);for(var c=[{name:"0",time:0}],d=s;c.length<t;)d+=S.exponential.sample(a),c.push({name:"".concat(c.length),time:d,x:300,y:200});for(var h=[],u=function(){var e=p[j],t=c.filter((function(t){return t.time<e.time-s})),n=h.filter((function(t){return t.source.time<e.time-s})),a=l({nodes:t,links:n,alpha:o});a.length>0&&(h.push({source:e,target:a[0]}),a.length>1&&a[0].name!==a[1].name&&h.push({source:e,target:a[1]}))},j=0,p=c;j<p.length;j++)u();return{nodes:c,links:h}}({nodeCount:this.state.nodeCount,lambda:this.state.lambda,alpha:this.state.alpha,nodeRadius:n,tipSelectionAlgorithm:B[this.state.tipSelectionAlgorithm].algo}),i=this.state,s=i.width,r=i.height,o=Object(h.a)(a.nodes);try{for(o.s();!(e=o.n()).done;){var l=e.value;l.y=r/4+Math.random()*(r/2),l.x=s/2}}catch(c){o.e(c)}finally{o.f()}this.force.stop(),this.setState({nodes:a.nodes,links:a.links,nodeRadius:n},(function(){t.recalculateFixedPositions()})),this.force.restart().alpha(1)}},{key:"recalculateFixedPositions",value:function(){this.state.nodes[0].fx=this.setState.height/2;var e,t=Object(h.a)(this.state.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.fx=this.xFromTime(n.time)}}catch(a){t.e(a)}finally{t.f()}}},{key:"xFromTime",value:function(e){var t=this.state.nodeRadius;if(this.state.nodes.length<2)return t;var n=this.state.nodes[this.state.nodes.length-1].time,a=Object(x.a)().domain([0,n]);return a.range([t,this.state.width-t]),a(e)}},{key:"mouseEntersNodeHandler",value:function(e){var t=e.target.getAttribute("name");this.setState({hoveredNode:this.state.nodes.find((function(e){return e.name===t}))})}},{key:"mouseLeavesNodeHandler",value:function(e){this.setState({hoveredNode:void 0})}},{key:"getApprovedNodes",value:function(e){return e?function(e){e.nodes;for(var t=e.links,n=[e.root],a=new Set,i=new Set,s=function(){var e,s=n.pop(),r=t.filter((function(e){return e.source===s})),o=Object(h.a)(r);try{for(o.s();!(e=o.n()).done;){var l=e.value;i.add(l),a.has(l.target)||(n.push(l.target),a.add(l.target))}}catch(c){o.e(c)}finally{o.f()}};n.length>0;)s();return{nodes:a,links:i}}({nodes:this.state.nodes,links:this.state.links,root:e}):{nodes:new Set,links:new Set}}},{key:"getApprovingNodes",value:function(e){return e?function(e){e.nodes;for(var t=e.links,n=[e.root],a=new Set,i=new Set,s=function(){var e,s=n.pop(),r=t.filter((function(e){return e.target===s})),o=Object(h.a)(r);try{for(o.s();!(e=o.n()).done;){var l=e.value;i.add(l),a.has(l.source)||(n.push(l.source),a.add(l.source))}}catch(c){o.e(c)}finally{o.f()}};n.length>0;)s();return{nodes:a,links:i}}({nodes:this.state.nodes,links:this.state.links,root:e}):{nodes:new Set,links:new Set}}},{key:"handleTipSelectionRadio",value:function(e){var t=this;this.setState({tipSelectionAlgorithm:e.target.value},(function(){t.startNewTangle()}))}},{key:"render",value:function(){var e,t,n,i=this,s=this.state,r=s.nodeCount,o=s.lambda,l=s.alpha,c=s.width,h=s.height,u=this.getApprovedNodes(this.state.hoveredNode),j=this.getApprovingNodes(this.state.hoveredNode);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"top-bar-container",style:{width:c},children:[Object(a.jsx)("div",{className:"left-cell"}),Object(a.jsx)("div",{className:"right-cell"}),Object(a.jsxs)("div",{className:"top-bar-row",children:[Object(a.jsx)("div",{className:"slider-title",children:"Number of transactions"}),Object(a.jsx)("div",{className:"slider-container",children:Object(a.jsx)(K,{min:1,max:500,defaultValue:20,value:r,step:1,marks:(e={},Object(d.a)(e,1,"".concat(1)),Object(d.a)(e,500,"".concat(500)),e),handle:X,onChange:function(e){i.setState(Object.assign(i.state,{nodeCount:e})),i.startNewTangle()}})}),Object(a.jsx)("div",{className:"tip-algo-label",children:Object(a.jsx)(J,{algoKey:"UR",selectedAlgorithm:this.state.tipSelectionAlgorithm,onChange:this.handleTipSelectionRadio.bind(this)})})]}),Object(a.jsxs)("div",{className:"top-bar-row",children:[Object(a.jsx)("div",{className:"slider-title",children:"Transaction rate (\u03bb)"}),Object(a.jsx)("div",{className:"slider-container",children:Object(a.jsx)(K,{min:.1,max:50,step:.2,defaultValue:1.5,value:o,marks:(t={},Object(d.a)(t,.1,"".concat(.1)),Object(d.a)(t,50,"".concat(50)),t),handle:X,onChange:function(e){i.setState(Object.assign(i.state,{lambda:e})),i.startNewTangle()}})}),Object(a.jsx)("div",{className:"tip-algo-label",children:Object(a.jsx)(J,{algoKey:"UWRW",selectedAlgorithm:this.state.tipSelectionAlgorithm,onChange:this.handleTipSelectionRadio.bind(this)})})]}),Object(a.jsxs)("div",{className:"top-bar-row",children:[Object(a.jsx)("div",{className:"slider-title",children:"alpha"}),Object(a.jsx)("div",{className:"slider-container",children:Object(a.jsx)(K,{min:0,max:5,step:.001,defaultValue:.5,value:l,marks:(n={},Object(d.a)(n,0,"".concat(0)),Object(d.a)(n,5,"".concat(5)),n),handle:X,disabled:"WRW"!==this.state.tipSelectionAlgorithm,onChange:function(e){i.setState(Object.assign(i.state,{alpha:e})),i.startNewTangle()}})}),Object(a.jsx)("div",{className:"tip-algo-label",children:Object(a.jsx)(J,{algoKey:"WRW",selectedAlgorithm:this.state.tipSelectionAlgorithm,onChange:this.handleTipSelectionRadio.bind(this)})})]}),Object(a.jsxs)("div",{className:"top-bar-row",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{className:"tip-algo-label",children:Object(a.jsx)(J,{algoKey:"AML",selectedAlgorithm:this.state.tipSelectionAlgorithm,onChange:this.handleTipSelectionRadio.bind(this)})})]})]}),Object(a.jsx)(N,{links:this.state.links,nodes:this.state.nodes,nodeCount:6,width:c,height:h,leftMargin:10,rightMargin:10,nodeRadius:this.state.nodeRadius,mouseEntersNodeHandler:this.mouseEntersNodeHandler.bind(this),mouseLeavesNodeHandler:this.mouseLeavesNodeHandler.bind(this),approvedNodes:u.nodes,approvedLinks:u.links,approvingNodes:j.nodes,approvingLinks:j.links,hoveredNode:this.state.hoveredNode,tips:H({nodes:this.state.nodes,links:this.state.links}),showLabels:this.state.nodeRadius>21})]})}}]),n}(s.a.Component),q=Object(c.b)((function(e,t){return{}}),(function(e,t){return{}}))(Y),G=Object(o.c)(l);Object(r.render)(Object(a.jsx)(c.a,{store:G,children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"title-bar-container",children:[Object(a.jsx)("div",{className:"left-title",children:Object(a.jsx)("h2",{children:"Iota Tangle Visualization"})}),Object(a.jsxs)("div",{className:"right-title",children:[Object(a.jsxs)("p",{children:["This demo shows the tangle structure behind Iota, as described in the ",Object(a.jsx)("a",{href:"https://iota.org/IOTA_Whitepaper.pdf",children:"white paper"}),"."]}),Object(a.jsxs)("p",{children:["The source code can be found on ",Object(a.jsx)("a",{href:"https://github.com/iotaledger/iotavisualization",children:"github"}),"."]})]})]}),Object(a.jsx)(q,{})]})}),document.getElementById("container"))}},[[191,1,2]]]);
//# sourceMappingURL=main.025887be.chunk.js.map